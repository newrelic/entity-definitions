relationships:
  - name: kafkaBrokerManagesKafkaTopic
    version: "1"
    origins:
      - NRI-Kafka Integration
    conditions:
      - attribute: event_type
        anyOf: [ "KafkaBrokerSample" ]
      - attribute: nr.entityType
        anyOf: [ "KafkaBroker" ]
      - attribute: integrationName
        anyOf: [ "com.newrelic.kafka" ]
      - attribute: topic
        present: true
    relationship:
      expires: P1D
      relationshipType: MANAGES
      source:
        extractGuid:
          attribute: entityGuid
          entityType:
            attribute: nr.entityType
      target:
        lookupGuid:
          candidateCategory: KAFKATOPIC
          fields:
            - field: clusterName
              attribute: clusterName
            - field: topic
              attribute: displayName