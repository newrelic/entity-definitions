{
  "name" : "NGINX Metrics (OpenTelemetry)",
  "pages" : [ {
    "name" : "NGINX Metrics",
    "widgets" : [ {
      "visualization" : {
        "id" : "viz.line"
      },
      "layout" : {
        "column" : 1,
        "row" : 1,
        "height" : 3,
        "width" : 6
      },
      "title" : "Requests per second",
      "rawConfiguration" : {
        "nrqlQueries" : [ {
          "query" : "FROM Metric SELECT sum(`nginx.requests`) / sum((endTimestamp - timestamp) / 1000) AS 'Requests per second' WHERE instrumentation.provider = 'opentelemetry' AND metricName = 'nginx.requests' TIMESERIES AUTO",
          "accountId": 0} ]
      }
    }, {
      "visualization" : {
        "id" : "viz.line"
      },
      "layout" : {
        "column" : 7,
        "row" : 1,
        "height" : 3,
        "width" : 6
      },
      "title" : "Active Connections",
      "rawConfiguration" : {
        "nrqlQueries" : [ {
          "query" : "FROM Metric SELECT average(nginx.connections_current) AS 'Active Connections' WHERE state = 'active' AND instrumentation.provider = 'opentelemetry' AND metricName = 'nginx.connections_current' TIMESERIES AUTO",
          "accountId": 0} ]
      }
    }, {
      "visualization" : {
        "id" : "viz.line"
      },
      "layout" : {
        "column" : 1,
        "row" : 4,
        "height" : 3,
        "width" : 6
      },
      "title" : "Connections Accepted per second",
      "rawConfiguration" : {
        "nrqlQueries" : [ {
          "query" : "FROM Metric SELECT sum(`nginx.connections_accepted`) / sum((endTimestamp - timestamp) / 1000) AS 'Connections Accepted per second' WHERE instrumentation.provider = 'opentelemetry' AND metricName = 'nginx.connections_accepted' TIMESERIES AUTO",
          "accountId": 0} ]
      }
    }, {
      "visualization" : {
        "id" : "viz.line"
      },
      "layout" : {
        "column" : 7,
        "row" : 4,
        "height" : 3,
        "width" : 6
      },
      "title" : "Connections Dropped per second",
      "rawConfiguration" : {
        "nrqlQueries" : [ {
          "query" : "FROM Metric SELECT (sum(connections_accepted) - sum(connections_handled)) / sum((endTimestamp - timestamp) / 1000) AS 'Connections Dropped per second from OTEL' WHERE instrumentation.provider = 'opentelemetry' AND (metricName = 'nginx.connections_accepted' OR metricName = 'nginx.connections_handled') TIMESERIES AUTO",
          "accountId": 0} ]
      }
    } ]
  } ]
}
