{
  "name" : "NGINX Metrics (OpenTelemetry)",
  "pages" : [ {
    "name" : "NGINX Metrics",
    "widgets" : [ {
      "visualization" : {
        "id" : "viz.line"
      },
      "layout" : {
        "column" : 1,
        "row" : 1,
        "height" : 3,
        "width" : 6
      },
      "title" : "Requests per second",
      "rawConfiguration" : {
        "nrqlQueries" : [ {
          "query" : "FROM (FROM Metric SELECT rate(sum(nginx.requests), 1 second) AS requestsPerSecond WHERE instrumentation.provider = 'opentelemetry' FACET entity.guid TIMESERIES AUTO) SELECT average(requestsPerSecond) TIMESERIES AUTO",
          "accountId": 0} ]
      }
    }, {
      "visualization" : {
        "id" : "viz.line"
      },
      "layout" : {
        "column" : 7,
        "row" : 1,
        "height" : 3,
        "width" : 6
      },
      "title" : "Active Connections",
      "rawConfiguration" : {
        "nrqlQueries" : [ {
          "query" : "FROM Metric SELECT average(nginx.connections_current) WHERE state = 'active' AND instrumentation.provider = 'opentelemetry' TIMESERIES AUTO",
          "accountId": 0} ]
      }
    }, {
      "visualization" : {
        "id" : "viz.line"
      },
      "layout" : {
        "column" : 1,
        "row" : 4,
        "height" : 3,
        "width" : 6
      },
      "title" : "Connections Accepted per second",
      "rawConfiguration" : {
        "nrqlQueries" : [ {
          "query" : "FROM (FROM Metric SELECT rate(sum(nginx.connections_accepted), 1 second) AS connectionsAcceptedPerSecond WHERE instrumentation.provider = 'opentelemetry' FACET entity.guid TIMESERIES AUTO) SELECT average(connectionsAcceptedPerSecond) TIMESERIES AUTO",
          "accountId": 0} ]
      }
    }, {
      "visualization" : {
        "id" : "viz.line"
      },
      "layout" : {
        "column" : 7,
        "row" : 4,
        "height" : 3,
        "width" : 6
      },
      "title" : "Connections Dropped per second",
      "rawConfiguration" : {
        "nrqlQueries" : [ {
          "query" : "FROM (FROM Metric SELECT abs(rate(sum(nginx.connections_accepted), 1 second) - rate(sum(nginx.connections_handled), 1 second)) AS connectionsDroppedPerSecond WHERE instrumentation.provider = 'opentelemetry' FACET entity.guid TIMESERIES AUTO) SELECT average(connectionsDroppedPerSecond) TIMESERIES AUTO",
          "accountId": 0} ]
      }
    } ]
  } ]
}
