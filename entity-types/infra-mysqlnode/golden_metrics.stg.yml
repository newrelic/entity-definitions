queriesPerSecond:
  title: Queries per second
  unit: OPERATIONS_PER_SECOND
  queries:
    newRelic:
      select: rate(sum(query.queriesPerSecond), 1 second)
      from: MysqlSample
      eventId: entityGuid
      eventName: entityName
    opentelemetry:
      select: rate(sum(mysql.query.count), 1 second)
      from: Metric

slowQueriesPerMinute:
  title: Slow queries per minute
  unit: REQUESTS_PER_MINUTE
  queries:
    newRelic:
      select: rate(sum(query.slowQueriesPerSecond), 1 minute)
      from: MysqlSample
      eventId: entityGuid
      eventName: entityName
    opentelemetry:
      select: rate(sum(mysql.query.slow.count), 1 minute)
      from: Metric

connectionsPerSecond:
  title: Connections per second
  unit: COUNT
  queries:
    newRelic:
      select: rate(sum(net.connectionsPerSecond), 1 second)
      from: MysqlSample
      eventId: entityGuid
      eventName: entityName
    opentelemetry:
      select: rate(sum(mysql.connection.count), 1 second)
      from: Metric

queriesQuestions:
  title: Query questions
  unit: OPERATIONS_PER_SECOND
  queries:
    newRelic:
      select: rate(sum(query.questionsPerSecond), 1 second)
      from: MysqlSample
      eventId: entityGuid
      eventName: entityName
    opentelemetry:
      select: rate(sum(mysql.query.client.count), 1 second)
      from: Metric

threads:
  title: Threads connected
  unit: COUNT
  queries:
    newRelic:
      select: average(net.threadsConnected)
      from: MysqlSample
      eventId: entityGuid
      eventName: entityName
    opentelemetry:
      select: average(mysql.threads)
      from: Metric
      where: kind = 'connected'