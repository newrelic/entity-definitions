domain: INFRA
type: ELASTICSEARCHCLUSTER

configuration:
  entityExpirationTime: DAILY
  alertable: true

synthesis:
  rules:
    - compositeIdentifier:
        separator: ":"
        attributes:
          - elasticsearch.cluster.name
          - host.id
      name: elasticsearch.cluster.name
      encodeIdentifierInGUID: true
      conditions:
        - attribute: eventType
          value: Metric
        - attribute: elasticsearch.cluster.name
          present: true
        - attribute: instrumentation.provider
          value: opentelemetry
        - attribute: otel.library.name
          value: "github.com/open-telemetry/opentelemetry-collector-contrib/receiver/elasticsearchreceiver"
        - attribute: metricName
          prefix: elasticsearch.cluster.
      tags:
        host.name:
          entityTagName: hostName
        instrumentation.provider:
        elasticsearch.cluster.name:
          entityTagName: clusterName
        otel.library.name:
          entityTagName: instrumentation.name

dashboardTemplates:
  opentelemetry:
    template: opentelemetry_dashboard.stg.json

goldenTags:
  - clusterName
  - hostName