{
  "name": "OTEL ElasticSearch Cluster",
  "description": "ElasticSearch cluster Metrics",
  "pages": [
    {
      "name": "Cluster Overview",
      "description": null,
      "widgets": [
        {
          "title": "Data Nodes",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 3,
            "height": 1
          },
          "visualization": {
            "id": "viz.billboard"
          },
          "rawConfiguration": {
            "chartStyles": {
              "lineInterpolation": "linear"
            },
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "FROM Metric SELECT latest(elasticsearch.cluster.data_nodes) AS 'Data Nodes'"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "thresholdsWithSeriesOverrides": {
              "thresholds": [
                {
                  "from": 0,
                  "severity": "success"
                }
              ]
            }
          }
        },
        {
          "title": "Total Nodes",
          "layout": {
            "column": 4,
            "row": 1,
            "width": 3,
            "height": 1
          },
          "visualization": {
            "id": "viz.billboard"
          },
          "rawConfiguration": {
            "chartStyles": {
              "lineInterpolation": "linear"
            },
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "FROM Metric SELECT latest(elasticsearch.cluster.nodes) AS 'Total Nodes'"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "thresholdsWithSeriesOverrides": {
              "thresholds": [
                {
                  "from": 0,
                  "severity": "success"
                }
              ]
            }
          }
        },
        {
          "title": "In-Flight Fetches",
          "layout": {
            "column": 7,
            "row": 1,
            "width": 3,
            "height": 1
          },
          "visualization": {
            "id": "viz.billboard"
          },
          "rawConfiguration": {
            "chartStyles": {
              "lineInterpolation": "linear"
            },
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "FROM Metric SELECT latest(elasticsearch.cluster.in_flight_fetch) AS 'In-Flight Fetches'"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "thresholdsWithSeriesOverrides": {
              "thresholds": [
                {
                  "from": 0,
                  "severity": "success"
                }
              ]
            }
          }
        },
        {
          "title": "Current Pending Task",
          "layout": {
            "column": 10,
            "row": 1,
            "width": 3,
            "height": 1
          },
          "visualization": {
            "id": "viz.billboard"
          },
          "rawConfiguration": {
            "chartStyles": {
              "lineInterpolation": "linear"
            },
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "FROM Metric SELECT latest(elasticsearch.cluster.pending_tasks) AS 'Pending Tasks'"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "thresholdsWithSeriesOverrides": {
              "thresholds": [
                {
                  "from": 0,
                  "severity": "success"
                }
              ]
            }
          }
        },
        {
          "title": "Current Cluster Health",
          "layout": {
            "column": 1,
            "row": 2,
            "width": 4,
            "height": 3
          },
          "visualization": {
            "id": "viz.billboard"
          },
          "rawConfiguration": {
            "chartStyles": {
              "lineInterpolation": "linear"
            },
            "dataFormatters": [],
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "FROM Metric SELECT \n    IF(latest(status) = 'green', 'ðŸŸ¢ GREEN',\n    IF(latest(status) = 'yellow', 'ðŸŸ¡ YELLOW',\n    'ðŸ”´ RED'\n)) AS 'Cluster Health'"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            }
          }
        },
        {
          "title": "Shards",
          "layout": {
            "column": 5,
            "row": 2,
            "width": 4,
            "height": 3
          },
          "visualization": {
            "id": "viz.pie"
          },
          "rawConfiguration": {
            "chartStyles": {
              "gradient": {
                "enabled": false
              }
            },
            "facet": {
              "showOtherSeries": true
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT latest(elasticsearch.cluster.shards) \nFROM Metric\nFACET state"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            }
          }
        },
        {
          "title": "Document count",
          "layout": {
            "column": 9,
            "row": 2,
            "width": 4,
            "height": 3
          },
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "chartStyles": {
              "lineInterpolation": "linear"
            },
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "markers": {
              "displayedTypes": {
                "criticalViolations": false,
                "deployments": true,
                "relatedDeployments": true,
                "warningViolations": false
              }
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT latest(elasticsearch.index.documents) AS 'Total Documents in cluster'\nFROM Metric \nWHERE elasticsearch.index.name = '_all' AND aggregation = 'primary_shards' TIMESERIES AUTO"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "thresholds": {
              "isLabelVisible": true
            },
            "yAxisLeft": {
              "zero": true
            },
            "yAxisRight": {
              "zero": true
            }
          }
        },
        {
          "title": "Pending Task",
          "layout": {
            "column": 1,
            "row": 5,
            "width": 4,
            "height": 3
          },
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "chartStyles": {
              "lineInterpolation": "linear"
            },
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "markers": {
              "displayedTypes": {
                "criticalViolations": false,
                "deployments": true,
                "relatedDeployments": true,
                "warningViolations": false
              }
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT latest(elasticsearch.cluster.pending_tasks) \nFROM Metric\nTIMESERIES AUTO"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "thresholds": {
              "isLabelVisible": true
            },
            "yAxisLeft": {
              "zero": true
            },
            "yAxisRight": {
              "zero": true
            }
          }
        },
        {
          "title": "Cluster State Update Time",
          "layout": {
            "column": 5,
            "row": 5,
            "width": 4,
            "height": 3
          },
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "chartStyles": {
              "lineInterpolation": "linear"
            },
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "markers": {
              "displayedTypes": {
                "criticalViolations": false,
                "deployments": true,
                "relatedDeployments": true,
                "warningViolations": false
              }
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "SELECT rate(sum(elasticsearch.cluster.state_update.time), 1 minute) / 1000 AS 'Cluster State Update Time (s/min)' FROM Metric TIMESERIES AUTO"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "thresholds": {
              "isLabelVisible": true
            },
            "yAxisLeft": {
              "zero": true
            },
            "yAxisRight": {
              "zero": true
            }
          }
        },
        {
          "title": "Cluster Health Status",
          "layout": {
            "column": 9,
            "row": 5,
            "width": 4,
            "height": 3
          },
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "chartStyles": {
              "lineInterpolation": "linear"
            },
            "colors": {
              "seriesOverrides": [
                {
                  "color": "#f00f0f",
                  "seriesName": "red"
                },
                {
                  "color": "#7d7373",
                  "seriesName": "green"
                },
                {
                  "color": "#63e10e",
                  "seriesName": "yellow"
                }
              ]
            },
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "markers": {
              "displayedTypes": {
                "criticalViolations": false,
                "deployments": true,
                "relatedDeployments": true,
                "warningViolations": false
              }
            },
            "nrqlQueries": [
              {
                "accountId": 0,
                "query": "FROM Metric SELECT latest(elasticsearch.cluster.health) FACET status TIMESERIES AUTO"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "thresholds": {
              "isLabelVisible": true
            },
            "yAxisLeft": {
              "zero": true
            },
            "yAxisRight": {
              "zero": true
            }
          }
        }
      ]
    }
  ]
}