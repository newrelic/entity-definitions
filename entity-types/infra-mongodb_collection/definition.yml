domain: INFRA
type: MONGODB_COLLECTION

synthesis:
  rules:
    - ruleName: infra_mongodb_collection_composite
      compositeIdentifier:
        separator: ":"
        attributes:
          - mongodb_cluster_name
          - database
          - collection
      encodeIdentifierInGUID: true
      name: collection
      conditions:
        - attribute: eventType
          value: Metric
        - attribute: metricName
          prefix: mongodb_collstats_
      tags:
        mongodb_cluster_name:
        database:
        collection:

    - ruleName: infra_mongodb_collection_composite_2
      compositeIdentifier:
        separator: ":"
        attributes:
          - mongodb_cluster_name
          - database
          - collection
      encodeIdentifierInGUID: true
      name: collection
      conditions:
        - attribute: eventType
          value: Metric
        - attribute: metricName
          prefix: mongodb_indexstats_
      tags:
        mongodb_cluster_name:
        database:
        collection:

    - ruleName: infra_mongodb_collection_composite_3
      compositeIdentifier:
        separator: ":"
        attributes:
          - mongodb_cluster_name
          - database
          - collection
      encodeIdentifierInGUID: true
      name: collection
      conditions:
        - attribute: eventType
          value: Metric
        - attribute: metricName
          prefix: mongodb_top_
      tags:
        mongodb_cluster_name:
        database:
        collection:

dashboardTemplates:
  newRelic:
    template: dashboard.json

configuration:
  entityExpirationTime: DAILY
  alertable: true

ownership:
  primaryOwner:
    teamName: "no owner"
