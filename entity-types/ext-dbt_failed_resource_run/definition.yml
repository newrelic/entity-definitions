domain: EXT
type: DBT_FAILED_RESOURCE_RUN

synthesis:
  rules:
    - ruleName: ext_dbt_failed_resource_run_entity_id
      identifier: entity_id 
      name: entity_name 
      encodeIdentifierInGUID: true
      conditions:
        - attribute: eventType
          value: dbt_resource_run 
        - attribute: dbt_source
          present: True
        - attribute: status
          value: fail 
    - ruleName: ext_dbt_failed_resource_run_entity_id_2
      identifier: entity_id 
      name: entity_name 
      encodeIdentifierInGUID: true
      conditions:
        - attribute: eventType
          value: dbt_resource_run 
        - attribute: dbt_source
          present: True
        - attribute: status 
          value: warn 
    - ruleName: ext_dbt_failed_resource_run_entity_id_3
      identifier: entity_id 
      name: entity_name 
      encodeIdentifierInGUID: true
      conditions:
        - attribute: eventType
          value: dbt_resource_run 
        - attribute: dbt_source
          present: True
        - attribute: status 
          value: error

  tags:
    run_team:
    team:
    project_name:
    environment_name:
    resource_type:
    slack_mentions:
    run_href:
    job_name:
    run_created_at: 
    status:
    error:
    name:
    description:
    dbt_source:

goldenTags:
  - job_name
  - run_created_at 
  - status
  - error
  - name
  - description
  - dbt_source

dashboardTemplates:
  newRelic:
    template: dashboard.json

configuration:
  entityExpirationTime: EIGHT_DAYS 
  alertable: true 

ownership:
  primaryOwner:
    teamName: "no owner"
