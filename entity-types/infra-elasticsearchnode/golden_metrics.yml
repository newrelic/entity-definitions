activeSearches:
  title: Active searches
  unit: COUNT
  queries:
    newRelic:
      select: sum(activeSearches)
      from: ElasticsearchNodeSample
      eventId: entityGuid
      eventName: entityName
    opentelemetry:
      select: sum(elasticsearch.node.operations.current)
      from: Metric
      where: operation='query' AND metricName = 'elasticsearch.node.operations.current'
      eventId: entity.guid
      eventName: entity.name
missingDocumentRequests:
  title: Missing document requests
  unit: COUNT
  queries:
    newRelic:
      select: sum(get.requestsDocumentMissing)
      from: ElasticsearchNodeSample
      eventId: entityGuid
      eventName: entityName
    opentelemetry:
      select: average(elasticsearch.node.operations.get.completed)
      from: Metric
      where: result='miss' AND metricName = 'elasticsearch.node.operations.get.completed'
      eventId: entity.guid
      eventName: entity.name  
fileStoreIOOperations:
  title: File store I/O operations
  unit: COUNT
  queries:
    newRelic:
      select: sum(fs.iOOperations)
      from: ElasticsearchNodeSample
      eventId: entityGuid
      eventName: entityName
    opentelemetry:
      select: average(elasticsearch.node.disk.io.read)
      from: Metric
      where: metricName = 'elasticsearch.node.disk.io.read'
      eventId: entity.guid
      eventName: entity.name
activeMerges:
  queries:
    newRelic:
      eventId: entityGuid
      eventName: entityName
      from: ElasticsearchNodeSample
      select: average(`merges.currentActive`)
    opentelemetry:
      select: max(elasticsearch.node.operations.current)
      from: Metric
      where: metricName = 'elasticsearch.node.operations.current' and operation = 'merge'
      eventId: entity.guid
      eventName: entity.name
  unit: COUNT
  title: Current active merges
totalQueries:
  title: Total queries
  unit: COUNT
  queries:
    newRelic:
      eventId: entityGuid
      eventName: entityName
      select: average(`queriesTotal`)
      from: ElasticsearchNodeSample
    opentelemetry:
      select: average(elasticsearch.node.operations.completed)
      from: Metric
      where: operation='query' AND metricName = 'elasticsearch.node.operations.completed'
      eventId: entity.guid
      eventName: entity.name

