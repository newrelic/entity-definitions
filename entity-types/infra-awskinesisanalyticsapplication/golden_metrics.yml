millisBehindLatest:
  title: Processing lag (seconds)
  units: SECONDS
  queries:
    aws:
      select: average(aws.kinesisanalytics.millis_behind_latest)
      from: Metric
      eventId: entity.guid
      eventName: entity.name
    awsSample:
      select: average(provider.millisBehindLatest.Average) * 1000
      from: AwsKinesisAnalyticsApplicationSample
      where: provider='AwsKinesisAnalyticsApplication'
      eventId: entityGuid
      eventName: entityName
bytesConsumedRate:
  title: Consumed bytes (bytes per sec)
  unit: BYTES_PER_SECOND
  queries:
    aws:
      select: average(aws.kinesisanalytics.bytes_consumed_rate)
      from: Metric
      eventId: entity.guid
      eventName: entity.name
    awsSample:
      select: average(provider.bytesConsumedRate.Average)
      from: AwsKinesisAnalyticsApplicationSample
      where: provider='AwsKinesisAnalyticsApplication'
      eventId: entityGuid
      eventName: entityName
numRecordsIn:
  title: Number of received records
  unit: COUNT
  queries:
    aws:
      select: average(aws.kinesisanalytics.num_records_in)
      from: Metric
      eventId: entity.guid
      eventName: entity.name
    awsSample:
      select: average(provider.numRecordsIn.Average)
      from: AwsKinesisAnalyticsTaskSample
      where: provider='AwsKinesisAnalyticsTask'
      eventId: entityGuid
      eventName: entityName
numRecordsOut:
  title: Number of emitted records
  unit: COUNT
  queries:
    aws:
      select: average(aws.kinesisanalytics.num_records_out)
      from: Metric
      eventId: entity.guid
      eventName: entity.name
    awsSample:
      select: average(provider.numRecordsOut.Average)
      from: AwsKinesisAnalyticsTaskSample
      where: provider='AwsKinesisAnalyticsTask'
      eventId: entityGuid
      eventName: entityName
recordsLagMax:
  title: Maximum lag
  unit: SECONDS
  queries:
    aws:
      select: max(aws.kinesisanalytics.records_lag_max)
      from: Metric
      eventId: entity.guid
      eventName: entity.name
    awsSample:
      select: max(provider.recordsLagMax.Maximum)
      from: AwsKinesisAnalyticsTaskSample
      where: provider='AwsKinesisAnalyticsTask'
      eventId: entityGuid
      eventName: entityName
