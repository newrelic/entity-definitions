domain: INFRA
type: MONGODB_INSTANCE

synthesis:
  rules:
    - ruleName: infra_mongodb_instance_mongodb_cluster_name
      identifier: mongodb_cluster_name
      encodeIdentifierInGUID: true
      name: mongodb_cluster_name
      conditions:
        - attribute: eventType
          value: Metric
        - attribute: metricName
          prefix: mongodb_oplog_
      tags:
        mongodb_cluster_name:

    - ruleName: infra_mongodb_instance_mongodb_cluster_name_2
      identifier: mongodb_cluster_name
      encodeIdentifierInGUID: true
      name: mongodb_cluster_name
      conditions:
        - attribute: eventType
          value: Metric
        - attribute: metricName
          prefix: mongodb_rs_
      tags:
        mongodb_cluster_name:

    - ruleName: infra_mongodb_instance_mongodb_cluster_name_3
      identifier: mongodb_cluster_name
      encodeIdentifierInGUID: true
      name: mongodb_cluster_name
      conditions:
        - attribute: eventType
          value: Metric
        - attribute: metricName
          prefix: mongodb_ss_
      tags:
        mongodb_cluster_name:

    - ruleName: infra_mongodb_instance_mongodb_cluster_name_4
      identifier: mongodb_cluster_name
      encodeIdentifierInGUID: true
      name: mongodb_cluster_name
      conditions:
        - attribute: eventType
          value: Metric
        - attribute: metricName
          prefix: mongodb_sys_
      tags:
        mongodb_cluster_name:

    - ruleName: infra_mongodb_instance_mongodb_cluster_name_5
      identifier: mongodb_cluster_name
      encodeIdentifierInGUID: true
      name: mongodb_cluster_name
      conditions:
        - attribute: eventType
          value: Metric
        - attribute: metricName
          prefix: mongodb_clusterTime_
      tags:
        mongodb_cluster_name:

    - ruleName: infra_mongodb_instance_mongodb_cluster_name_6
      identifier: mongodb_cluster_name
      encodeIdentifierInGUID: true
      name: mongodb_cluster_name
      conditions:
        - attribute: eventType
          value: Metric
        - attribute: metricName
          prefix: mongodb_electionParticipantMetrics_
      tags:
        mongodb_cluster_name:

    - ruleName: infra_mongodb_instance_mongodb_cluster_name_7
      identifier: mongodb_cluster_name
      encodeIdentifierInGUID: true
      name: mongodb_cluster_name
      conditions:
        - attribute: eventType
          value: Metric
        - attribute: metricName
          prefix: mongodb_electionCandidateMetrics_
      tags:
        mongodb_cluster_name:

    - ruleName: infra_mongodb_instance_mongodb_cluster_name_8
      identifier: mongodb_cluster_name
      encodeIdentifierInGUID: true
      name: mongodb_cluster_name
      conditions:
        - attribute: eventType
          value: Metric
        - attribute: metricName
          prefix: mongodb_heartbeatIntervalMillis
      tags:
        mongodb_cluster_name:

    - ruleName: infra_mongodb_instance_mongodb_cluster_name_9
      identifier: mongodb_cluster_name
      encodeIdentifierInGUID: true
      name: mongodb_cluster_name
      conditions:
        - attribute: eventType
          value: Metric
        - attribute: metricName
          prefix: mongodb_members_
      tags:
        mongodb_cluster_name:

    - ruleName: infra_mongodb_instance_mongodb_cluster_name_10
      identifier: mongodb_cluster_name
      encodeIdentifierInGUID: true
      name: mongodb_cluster_name
      conditions:
        - attribute: eventType
          value: Metric
        - attribute: metricName
          prefix: mongodb_optimes_
      tags:
        mongodb_cluster_name:

    - ruleName: infra_mongodb_instance_mongodb_cluster_name_11
      identifier: mongodb_cluster_name
      encodeIdentifierInGUID: true
      name: mongodb_cluster_name
      conditions:
        - attribute: eventType
          value: Metric
        - attribute: metricName
          prefix: mongodb_writeMajorityCount
      tags:
        mongodb_cluster_name:

dashboardTemplates:
  newRelic:
    template: dashboard.json

configuration:
  entityExpirationTime: DAILY
  alertable: true

ownership:
  primaryOwner:
    teamName: "no owner"
