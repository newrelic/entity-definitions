scheduledCheckpoints:
  title: Scheduled checkpoints
  unit: OPERATIONS_PER_SECOND
  queries:
    newRelic:
      select: average(bgwriter.checkpointsScheduledPerSecond) 
      from: PostgresqlInstanceSample
      eventId: entityGuid
      eventName: entityName
    opentelemetry:
      select: average(postgresql.bgwriter.checkpoint.count)
      from: Metric
      where: type = 'scheduled'
      eventId: entityGuid
      eventName: entityName
      

requestedCheckpoints:
  title: Requested checkpoints
  unit: OPERATIONS_PER_SECOND
  queries:
    newRelic:
      select: bgwriter.checkpointsRequestedPerSecond
      from: PostgresqlInstanceSample
      eventId: entityGuid
      eventName: entityName
    opentelemetry:
      select: postgresql.bgwriter.checkpoint.count
      from: Metric
      where: type = 'requested'
      eventId: entityGuid
      eventName: entityName

buffersAllocated:
  title: Buffers allocated
  unit: OPERATIONS_PER_SECOND
  queries:
    newRelic:
      select: average(bgwriter.buffersAllocatedPerSecond) 
      from: PostgresqlInstanceSample
      eventId: entityGuid
      eventName: entityName
    opentelemetry:
      select: average(postgresql.bgwriter.buffers.allocated)
      from: Metric
      eventId: entityGuid
      eventName: entityName

# connectionActive:
#   title: Active connections
#   unit: COUNT
#   queries:
#     opentelemetry:
#       select: latest(postgresql.backends) as active_connections
#       from: Metric

