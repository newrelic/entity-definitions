messagesPublishedPerChannel:
  title: Messages published per channel
  unit: COUNT
  queries:
    newRelic:
      select: sum(exchange.messagesPublishedPerChannel)
      from: RabbitmqExchangeSample
      eventId: entityGuid
      eventName: entityName
    opentelemetry:
      select: sum(rabbitmq.message.published)
      from: Metric
      where: instrumentation.provider = 'opentelemetry'
      eventId: entity.guid
      eventName: entity.name

messagesPublishedPerChannelPerSecond:
  title: Messages published per channel per second
  unit: OPERATIONS_PER_SECOND
  queries:
    newRelic:
      select: average(exchange.messagesPublishedPerChannelPerSecond)
      from: RabbitmqExchangeSample
      eventId: entityGuid
      eventName: entityName

messagesPublishedQueue:
  title: Messages published queue
  unit: COUNT
  queries:
    newRelic:
      select: sum(exchange.messagesPublishedQueue)
      from: RabbitmqExchangeSample
      eventId: entityGuid
      eventName: entityName
    opentelemetry:
      select: sum(rabbitmq.message.published)
      from: Metric
      where: instrumentation.provider = 'opentelemetry'
      eventId: entity.guid
      eventName: entity.name

messagesPublishedQueuePerSecond:
  title: Messages published queue per second
  unit: OPERATIONS_PER_SECOND
  queries:
    newRelic:
      select: average(exchange.messagesPublishedQueuePerSecond)
      from: RabbitmqExchangeSample
      eventId: entityGuid
      eventName: entityName

messagesPublished:
  title: Messages Published
  unit: COUNT
  queries:
    newRelic:
      select: sum(exchange.messagesPublishedPerChannel)
      from: RabbitmqExchangeSample
      eventId: entityGuid
      eventName: entityName
    opentelemetry:
      select: sum(rabbitmq.message.published)
      from: Metric
      where: instrumentation.provider = 'opentelemetry'
      eventId: entity.guid
      eventName: entity.name

bindings:
  title: Bindings
  unit: COUNT
  queries:
    newRelic:
      select: average(exchange.bindings)
      from: RabbitmqExchangeSample
      eventId: entityGuid
      eventName: entityName

totalMessages:
  title: Total Messages
  unit: COUNT
  queries:
    opentelemetry:
      select: sum(rabbitmq.message.current)
      from: Metric
      where: instrumentation.provider = 'opentelemetry'
      eventId: entity.guid
      eventName: entity.name