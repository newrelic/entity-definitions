domain: EXT
type: ROUTER
synthesis:
  rules:
    # Network Router devices from Kentik using Metric API
    - identifier: device_name
      name: device_name
      encodeIdentifierInGUID: true
      conditions:
        - attribute: provider
          value: kentik-router
      tags:
        src_addr:
          entityTagName: device_ip
          multiValue: false

      # Mikrotik routers using Metric API
      # https://github.com/OscarDCorbalan/mikrotik-newrelic/
    - identifier: mikrotik.serialnumber
      name: mikrotik.name
      encodeIdentifierInGUID: true
      conditions:
        - attribute: instrumentation.provider
          value: mikrotik-router
      tags:
        instrumentation.provider:
        instrumentation.version:
          entityTagName: agentVersion
        mikrotik.model:
          entityTagName: model
        mikrotik.boardname:
          entityTagName: boardname
        mikrotik.currentfirmware:
          entityTagName: firmware

goldenTags:
  - device_ip

## Note - these dashboards are overwritten at the entity-ui layer by custom components built by the NR product team
dashboardTemplates:
  # Default
  default:
    template: default-dashboard.json
  # Mikrotik Router from mikrotik-newrelic script
  mikrotik-router:
    template: mikrotik-dashboard.json
